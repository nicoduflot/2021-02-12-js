<!DOCTYPE html>
<html lang="fr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Formation JavaScript ES6</title>
    <link rel="stylesheet" href="../css/bootstrap-icons.css" />
    <script src="../js/scripts.js"></script>
    <link rel="stylesheet" href="../css/style.css" />
    <script>
        /* avant es6 */
        /*
        var tableau = new Array('valeur', 1, 13, true, {nom: 'Duflot', age: 44});
        console.log(tableau);
        console.log(typeof tableau);
        */

        const tableau = ['valeur', 1, 13, true, {nom: 'Duflot', age: 44}];
        console.log(tableau);
        console.log(typeof tableau);

        let tabTest = [];
        console.log('tabTest : ', tabTest);

        /* 
        Les tableaux associatifs 
        en php  les tableaux peuvent être de cette forme
        [
            "uneClef" => "une valeur",
            12 => 145,
            "longitude" => ""
        ]

        En JS, ça n'existe naturellement, on peut les créer mais ÇA N'EST PAS NATUREL
        */

        let tabAsso = [];
        tabAsso['fruit'] = 'cerise';
        tabAsso['legume'] = 'courgette';
        tabAsso['cereale'] = 'blé';

        console.log(tabAsso);

        /* 
        une des raisons principale est que javascript ne reconnais 
        pas de longueur à ce tableau alors qu'il est bien composé de trois éléments 

        On utilisera à la place une instance de la classe Map() (plus tard dans la partie collection)
        */

        let cars = ['Peugeot', 'Citroën', 'Renault'];
        console.log(cars.length);

        /* ajouter un élément dans le tableau */
        cars[cars.length] = 'Ford'; /* NON !!!!! */
        /* on utilise la méthode des tableau .push() */
        cars.push('Fiat', 'Hyundai');

        /* les boucles */

        console.log('------------ boucle for ----------');
        for(let i = 0; i < cars.length; i = i + 1){
            console.log(cars[i]);
        }

        console.log('------------ boucle for in ----------');
        for(let index in cars){
            console.log(cars[index]);
        }
        
        /* le for in peut parcourir les objets */
        
        const obj = {
            nom: 'Duflot',
            prenom: 'Nicolas',
            age: 44,
            presentation: function(){
                return `Bonjour, je m'appelle ${this.prenom} ${this.nom}`;
            }
        };
        
        console.log(obj);
        console.log(obj.nom);
        console.log(obj.presentation());
        
        console.log('------------ boucle for in sur un objet ----------');
        for(let key in obj){
            console.log(`${key} : ${obj[key]}`);
        }
        
        /* depuis es6 */
        console.log('------------ boucle for of ----------');
        for(let value of cars){
            console.log(value);
        }
        
        console.log('------------ boucle tant que (while) ----------');
        let cpt = 0;
        while(cpt < cars.length){
            console.log(cars[cpt]);
            cpt = cpt + 1;
        }
        
        let newCars = [];
        cpt = 0;
        console.log('------------ boucle faire tant que (do...while) ----------');
        do{
            if(cars.length > 0){
                console.log(cars[cpt]);
                newCars.push(cars[cpt]);
            }
            cpt = cpt + 1 ;
        }while(cpt < cars.length)

        console.log(newCars);

        console.log('---------- forEach() ---------------');
        cars.forEach(function(value){
            console.log('toto', value);
        });

        let tabTarif = [12, 55.6, 23];
        const TVA = 0.055;

        console.log(tabTarif);
        
        tabTarif.forEach(function(valeur, index, tab){
            tab[index] = valeur * (1 + TVA);
        });
        
        console.log( `tabtarif : ${tabTarif}`);

        console.log('------------ .map() (uniquement pour les tableaux) -----------');
        cars.map(function(valeur, index, tab){
            console.log(tab[index], valeur);
        });

        /* es6 .entries() */
        console.log('------------- .entries() -------------');
        for(let entry of cars.entries()){
            console.log(entry);
        }

        cars.push('Seat', 'Toyota', 'Volkswagen');
        console.table(cars);

        /* supprimer les valeurs du tableau */
        /* supprimer la dernière "case"d'un tableau .pop() extraiy la dernière valeur du tableau */
        const lastEntry = cars.pop();
        console.log(lastEntry, cars);

        /* supprimer la première case d'un tableau (extraire la donnée et supprimer la case) .shift() */
        const firstEntry = cars.shift();
        console.log(firstEntry, cars);

        /* extraire, remplacer, ajouter des valeurs dans le tableau .splice() */
        /* utilisation 1 : extraire des valeurs */
        const removed = cars.splice(1, 3);
        console.log(removed, cars);
        /* remplacer */
        const replaced = cars.splice(0, 1, 'Alpine', 'Mazda');
        console.log(replaced, cars);
        /* ajouter */
        cars.splice(1, 0, firstEntry, lastEntry, removed[0], removed[1], removed[2], replaced[0]);
        console.log(cars);

        //let tab 

        /* 
        faire une copie de cars dans le nouveau tableau carsClone 
        supprimer la dernière valeur de carsClone
        afficher cars et carsClone dans la console
        */

        let carsClone = cars.slice();
        carsClone.pop();
        console.log(carsClone, cars);

        let partCars = cars.slice(3, 6);
        console.log(partCars);

        let tabExemple = '12.5;56.3;12;0.5'.split(';');
        console.log(tabExemple);

        let chaineExemple = [12.5, 56.3, 12, 0.5].join(';');
        console.log(chaineExemple);

        let mot01 = 'kayane';
        let motInverse = mot01.split('').reverse().join('');
        console.log(motInverse);

        if(mot01 === motInverse){
            console.log(`${mot01} est un palindrome`);
        }else{
            console.log(`${mot01} n'est pas un palindrome`);
        }

        let mot02 = 'kayak';
        motInverse = mot02.split('').reverse().join('');

        if(mot02 === motInverse){
            console.log(`${mot02} est un palindrome`);
        }else{
            console.log(`${mot02} n'est pas un palindrome`);
        }

        tabExemple.sort().reverse();
        console.log(tabExemple);

        /* et les tableau à deux dimensions ? */
        let carsTest = [
            ['Fiat', 1996],
            ['Kya', 1995],
            ['Kya', 1990],
            ['Ford', 1950],
            ['12', '62'],
            ['12', 1]
        ];

        console.log(carsTest);
        console.table(carsTest);

        console.table(carsTest.sort());

        /* boucles for imbriquées : permettent de parcourir des tableaux de tableaux */

        console.log('---------- parcourir un "tableau à deux dimensions" avec for --------------');
        for(let i = 0; i < carsTest.length; i = i + 1){
            for(let j = 0; j < carsTest[i].length; j = j + 1){
                console.log(carsTest[i][j]);
            }
        }

        console.log('------- parcourir un "tableau à deux dimensions" avec for of ----------');
        for(value of carsTest){
            for(subValue of value){
                console.log(subValue);
            }
        }

        console.log('trouver un élément dans un tableau .find()');
        const arrayNum = [5, 8, 130, 54, 12, 44];
        /* trouver le premier élément du tableau strictement supérieur à 20 */
        const found = arrayNum.find(function(element){
            /*
            if(element > 20){
                return element;
            }
            */
           return element > 20;
        });
        
        console.log(found);
        /* trouver tous les éléments du tableau strictement supérieur à 20 */
        console.log('trouver tous les éléments correspondant à un filtre dans un tableau .filter()');
        const filtered = arrayNum.filter(function(element){
            return element > 20;
        });

        console.log(filtered);

        /*
        function(element){
            if(element > 20){
                return element;
            }
        }

        function(element){
            return element > 20;
        }

        (element)=>{
            return element > 20;
        }

        element=>{
            return element > 20;
        }

        const filtered = arrayNum.filter(function(element){
            if(element > 20){
                return element;
            }
        });

        const filtered = arrayNum.filter(element=>element > 20);
        
        */

        const filtered2 = arrayNum.filter(element=>element > 20);
        console.log(filtered2);

        /* Gérer les CONSÉQUENCES ! */

        let monObjet = {
            nom: 'toto',
            numbers: [5, 8, 130, 54, 12, 44],
            affTab: function(){
                console.log(this);
                console.log(this.nom);
                this.numbers.map((element)=>{
                    console.log(this);                    
                    console.log(this.nom);                    
                    console.log(element);
                });
            }
        };

        monObjet.affTab();

    </script>
</head>
<body>
    <header>
        <div class="container">
            <a href="../"><h1>Formation JavaScript ES6</h1></a>
            <i class="bi bi-list toggle-menu" style="font-size: 2rem;color: white;" data-target="#navPrinc"></i>
        </div>
    </header>
    <nav>
        <div class="container">
            <div class="slide-menu" id="navPrinc">
                <ul class="navigation">
                    <li>
                        <details>
                            <summary>
                                Introduction
                            </summary>
                            <ul class="navigation">
                                <li>
                                    <a href="../introduction/index.html" title="premiers scripts JS" >Intro JS</a>
                                </li>
                                <li>
                                    <a href="../introduction/tableaux.html" title="Les tableaux JS JS">Les tableaux</a>
                                </li>
                                <li>
                                    <a href="../introduction/fonctions.html" title="Les fonctions JS">Les fonctions</a>
                                </li>
                                <li>
                                    <a href="../introduction/destructuration.html" title="La destructuration">La destructuration</a>
                                </li>
                                <li>
                                    <a href="../introduction/storage.html" title="Storage">Storage</a>
                                </li>
                            </ul>
                        </details>
                    </li>
                    <li>
                        <details>
                            <summary>
                                Le DOM
                            </summary>
                            <ul class="navigation">
                                <li>
                                    <a href="../dom/index.html" title="Le DOM : Document Object Model">DOM</a>
                                </li>
                                <li>
                                    <a href="../dom/dom.html" title="Le DOM : Créer dans le DOM">Créer dans le DOM</a>
                                </li>
                                <li>
                                    <a href="../dom/css.html" title="Le DOM : CSS">DOM & CSS</a>
                                </li>
                                <li>
                                    <a href="../dom/dataset.html" title="Le DOM : Les dataset">Dataset</a>
                                </li>
                            </ul>
                        </details>
                    </li>
                    <li>
                        <details>
                            <summary>
                                AJAX
                            </summary>
                            <ul class="navigation">
                                <li>
                                    <a href="../ajax/index.html" title="AJAX : xhr">XHR</a>
                                </li>
                                <li>
                                    <a href="../ajax/promesses.html" title="AJAX : Promesses">Promesses</a>
                                </li>
                                <li>
                                    <a href="../ajax/bdd.html" title="AJAX : Fetch">Fetch</a>
                                </li>
                                <li>
                                    <a href="../ajax/fetchjson.html" title="AJAX : fetch & JSON">JSON</a>
                                </li>
                            </ul>
                        </details>
                    </li>
                    <li>
                        <details>
                            <summary>
                                POO
                            </summary>
                            <ul class="navigation">
                                <li>
                                    <a href="../poo/index.html" title="POO : Programmation Orientée Objet">POO</a>
                                </li>
                                <li>
                                    <a href="../poo/collection.html" title="POO : Les collections">Collections</a>
                                </li>
                                <li>
                                    <a href="../poo/module.html" title="POO : modules">Modules</a>
                                </li>
                                <li>
                                    <a href="../poo/iterator.html" title="POO : iterator">Iterator</a>
                                </li>
                                <li>
                                    <a href="../poo/factory.html" title="POO : Factory">Factory</a>
                                </li>
                                <li>
                                    <a href="../poo/class.html" title="POO : classes">Classes</a>
                                </li>
                            </ul>
                        </details>
                    </li>
                </ul>
            </div>
        </div>
    </nav>
    <main class="container">
        <article>
            <h2>Les tableaux</h2>
            <p>
                Tout est dans le code et la console
            </p>
        </article>
    </main>
    <footer>
        <div class="container">
            &copy; DAWAN - 07-2023
        </div>
    </footer>
</body>
</html>